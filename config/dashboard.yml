# config/dashboard.yml
http:
  routers:
    dashboard-router:
      entryPoints: [web]
      rule: "Host(`testtraefik1-170350-7-1365954890.sh.run.tcloudbase.com`) && PathPrefix(`/newpage`)"
      middlewares:
        - gzip
        # 移除 add-slash-newpage 中间件，让 SvelteKit 自己处理重定向
      service: dashboard-service
      priority: 1000

  services:
    dashboard-service:
      loadBalancer:
        servers:
          - url: "http://dyzfbakk.dashboard.qhph39ns.34m0njpv.com:3000"
        healthCheck:
          path: "/newpage/"  # 使用能正常响应的路径
          interval: "30s"
          timeout: "5s"

  middlewares:
    gzip:
      compress: {}